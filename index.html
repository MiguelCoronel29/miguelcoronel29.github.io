<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <title>Colectivos en Tiempo Real - Guernica y Zona</title>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

    <!-- Mapbox CSS y JS (versiÃ³n mÃ¡s reciente para mejor compatibilidad) -->
    <link href="https://api.mapbox.com/mapbox-gl-js/v3.5.0/mapbox-gl.css" rel="stylesheet">
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.5.0/mapbox-gl.js"></script>
    <link rel="manifest" href="manifest.json">

    <style>
        body {
            font-family: Arial, sans-serif;
            background: #111;
            color: #fff;
            margin: 0;
            padding: 20px;
        }

        h1 {
            text-align: center;
            margin-bottom: 10px;
        }

        #buses {
            max-width: 600px;
            margin: 0 auto 20px auto;
        }

        .bus {
            background: #222;
            padding: 12px;
            margin-bottom: 12px;
            border-radius: 6px;
            border-left: 6px solid;
            font-size: 14px;
        }

        #map {
            width: 100%;
            height: 60vh;
            /* 60% de la altura de la pantalla */
            min-height: 400px;
            border-radius: 10px;
            border: 1px solid #444;
            margin: 0 auto;
        }
    </style>
</head>

<body>
    <h1>ðŸšŒ Colectivos en Tiempo Real</h1>
    <div id="buses">Cargando colectivos...</div>
    <div id="map"></div>

    <!-- Botones -->
    <button id="centerAllBtn" style="margin-top:10px; padding:10px 20px; font-size:16px;">
        Centrar en todos los colectivos
    </button>
    <button id="myLocationBtn" style="margin-top:10px; padding:10px 20px; font-size:16px;">
        Mostrar mi ubicaciÃ³n
    </button>

    <!-- Registro del Service Worker (mejorado) -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(registration => {
                        console.log('Service Worker registrado con Ã©xito:', registration.scope);
                    })
                    .catch(error => {
                        console.log('Fallo al registrar Service Worker:', error);
                    });
            });
        }
    </script>

    <script src="app.js"></script>
</body>

</html>